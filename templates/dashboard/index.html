{% extends "dashboard/base.html" %}
{% load i18n %}
{% load prices_i18n %}

{% block title %}{{ block.super }}{% endblock %}

{% block content %}
<div class="row">
    <div class="col s12">
        <div class="card">
            <div class="data-table-header{% if not preauthorized_payments %} data-table-header--no-data{% endif %}">
                <span class="card-title black-text">{% trans "Preauthorized payments" context "Dashboard homepage table title" %}</span>
            </div>

            {% if preauthorized_payments %}
                <div class="data-table-container">
                    <table class="bordered responsive data-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>{% trans "Date" context "Preauthorized payments table header" %}</th>
                                <th>{% trans "Customer" context "Preauthorized payments table header" %}</th>
                                <th class="right-align">{% trans "Amount" context "Preauthorized payments table header" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for payment in preauthorized_payments %}
                                <tr>
                                    <td><a href="{% url "dashboard:order-details" order_pk=payment.order.pk %}">{{ payment.order }}</a></td>
                                    <td>{{ payment.created }}</td>
                                    <td>{{ payment.order.user|default:_("Guest") }}</td>
                                    <td class="right-align">{% gross payment.get_total_price html=True %}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="card-content card-content--no-data">
                    <p>{% trans "No preauthorized payments." context "Empty Preauthorized payments table message" %}</p>
                </div>
            {% endif %}
        </div>

        <div class="card">
            <div class="data-table-header{% if not orders_to_ship %} data-table-header--no-data{% endif %}">
                <span class="card-title black-text">
                    {% trans "Orders ready for shipment" context "Dashboard homepage table title" %}
                </span>
            </div>

            {% if orders_to_ship %}
                {% include "dashboard/includes/_orders_table.html" with orders=orders_to_ship %}
            {% else %}
                <div class="card-content card-content--no-data">
                    <p>{% trans "No orders are ready for shipment." context "Empty order table message" %}</p>
                </div>
            {% endif %}
        </div>

        <div class="card">
            <div class="data-table-header{% if not preauthorized_payments %} data-table-header--no-data{% endif %}">
                <span class="card-title">{% trans "Products with low stock" context "Dashboard homepage table title" %}</span>
            </div>

            {% if low_stock %}
                <div class="data-table-container">
                    <table class="bordered responsive data-table">
                        <thead>
                            <tr>
                                <th>{% trans "Product name" context "Low stock product list" %}</th>
                                <th class="right-align">{% trans "Stock left" context "Low stock product list" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for product in low_stock %}
                                <tr>
                                    <td>
                                        <a class="list-item-name list-item-name--single" href="{% url "dashboard:product-update" pk=product.pk %}#stock">
                                            {{ product }}
                                        </a>
                                    </td>
                                    <td class="right-align">
                                        {{ product.total_stock }}
                                    </td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="card-content card-content--no-data">
                    <p>{% trans "No products are low in stock." context "Empty low stock table message" %}</p>
                </div>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
