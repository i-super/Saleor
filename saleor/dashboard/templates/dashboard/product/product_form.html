{% extends "dashboard/base.html" %}
{% load prices_i18n %}
{% load i18n %}
{% load bootstrap %}
{% load images %}
{% load static %}

{% block title %}Product details{% endblock %}

{% block content %}
<div class="row">
    <h1 class="page-header">{{ title }}</h1>

    <div class="col-lg-8">
        <div class="form-message alert alert-success" hidden="hidden">
            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            <span class="glyphicon glyphicon-ok-sign"></span>
            <span class="message-content">{% trans "Data saved" %}</span>
        </div>
        <form method="post" action="." id="product-form" enctype="multipart/form-data">
        <div class="box">
            <div class="box-header">{% trans "Product data" %}</div>
                {% csrf_token %}
                {{ form|as_vertical_form }}

        </div>

        <div class="box">
            <div class="box-header">Inventory</div>
            {{ stock_formset.as_p }}
        </div>
        <div class="box">
            <div class="box-header">Images</div>
            {{ image_formset.as_p }}
        </div>
        <div class="box">
            <input type="submit" class="btn btn-primary" value="Save" />
        </div>
        </form>
    </div>

    <div class="col-lg-4">
        <div class="box">
            <div class="box-header">Product image</div>
            {% if product.images.exists %}
                <img class="img-responsive" src="{{ product.images.first|at_size:"small" }}" alt="">
            {% else %}
                <img class="img-responsive" src="http://placehold.it/300x300/&text=Product Image" alt="">
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
