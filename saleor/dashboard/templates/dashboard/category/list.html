{% extends "dashboard/base.html" %}
{% load i18n %}
{% load mptt_tags %}

{% block title %}{% trans "Categories" %} - {{ block.super }}{% endblock %}

{% block body_class %}body-categories{% endblock %}

{% block page_title %}{% trans "Categories" %}{% endblock %}

{% block header_extra %}
    <a class="btn-fab btn-floating btn-large waves-effect waves-light teal"
       href="{% url 'dashboard:category-add' %}">
        <i class="mdi-content-add"></i>
    </a>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">{% trans "Categories" %}{% if current_node %}: {{ current_node }}{% endif %}</h1>
            <a class="btn btn-default" href="{% url 'dashboard:category-add' %}">{% trans 'Add category' %}</a>
            <ul class="category-list">
                {% recursetree categories %}
                    <li>
                        {% if node.level > min_level %}<a href="{% url 'dashboard:categories' pk=node.pk %}">{{ node.name }}</a>{% else %}{{ node.name }}{% endif %}
                        <small><a href="{% url 'dashboard:category-update' pk=node.pk %}">Edit</a></small>
                        {% if not node.is_leaf_node %}
                            <ul class="children">
                                {{ children }}
                            </ul>
                        {% endif %}
                    </li>
                {% endrecursetree %}
            </ul>
        </div>
    </div>
{% endblock %}
