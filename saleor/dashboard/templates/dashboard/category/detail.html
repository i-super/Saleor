{% extends "dashboard/base.html" %}
{% load materializecss %}
{% load i18n %}
{% load mptt_tags %}

{% block title %}{% if category.pk %}{{ category }}{% else %}{% trans 'Add new category' %}{% endif %} - {% trans 'Categories' %} - {{ block.super }}{% endblock %}

{% block body_class %}body-categories{% endblock %}

{% block page_title %}{% if category.pk %}{{ category }}{% else %}{% trans 'Add new category' %}{% endif %}{% endblock %}

{% block breadcrumbs %}
    <ul class="breadcrumbs breadcrumbs--with-menu">
        <li><a href="{% url 'dashboard:category-root-list' %}">{% trans "Categories" %}</a></li>
        {% if path %}
            {% for node in path %}
                <li><a href="{% url 'dashboard:category-children-list' root_pk=node.pk %}">{{ node.name }}</a></li>
            {% endfor %}
        {% endif %}
        <li>{% if category.pk %}{{ category }}{% else %}{% trans 'Add new category' %}{% endif %}</li>
    </ul>
{% endblock %}

{% block menu_catalogue_class %} active{% endblock %}

{% block content %}
    <form method="post" id="category-form" enctype="multipart/form-data">
        <div class="row">
            {% csrf_token %}
            {{ form.parent|materializecss:"s12 m6 l6" }}
            {{ form.name|materializecss:"s12 m6" }}
            {{ form.description|materializecss }}
            {{ form.hidden|materializecss:"s12 l1" }}
        </div>

        <div class="row">
            <div class="col s12 right-align">
                {% if category.parent %}
                    <a href="{% url 'dashboard:category-children-list' root_pk=category.parent.pk %}" class="btn-flat">{% trans "Cancel" %}</a>
                {% else %}
                    <a href="{% url 'dashboard:category-root-list' %}" class="btn-flat">{% trans "Cancel" %}</a>
                {% endif %}
                {% if category.pk %}
                    <button type="submit" class="btn">{% trans "Update" %}</button>
                {% else %}
                    <button type="submit" class="btn">{% trans "Create" %}</button>
                {% endif %}
            </div>
        </div>
    </form>
{% endblock %}