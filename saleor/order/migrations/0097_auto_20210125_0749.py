# Generated by Django 3.1.5 on 2021-01-25 07:49

from django.db import migrations, models


def rename_draft_events_type(apps, schema_editor):
    OLD_ADDED_PRODUCTS_NAME = "draft_added_products"
    OLD_REMOVED_PRODUCTS_NAME = "draft_removed_products"
    NEW_ADDED_PRODUCTS_NAME = "added_products"
    NEW_REMOVED_PRODUCTS_NAME = "removed_products"
    OrderEvent = apps.get_model("order", "OrderEvent")

    OrderEvent.objects.filter(type=OLD_ADDED_PRODUCTS_NAME).update(
        type=NEW_ADDED_PRODUCTS_NAME
    )
    OrderEvent.objects.filter(type=OLD_REMOVED_PRODUCTS_NAME).update(
        type=NEW_REMOVED_PRODUCTS_NAME
    )


class Migration(migrations.Migration):

    dependencies = [
        ("order", "0096_order_shipping_tax_rate"),
    ]

    operations = [
        migrations.AlterField(
            model_name="orderevent",
            name="type",
            field=models.CharField(
                choices=[
                    ("DRAFT_CREATED", "draft_created"),
                    ("ADDED_PRODUCTS", "added_products"),
                    ("REMOVED_PRODUCTS", "removed_products"),
                    ("PLACED", "placed"),
                    ("PLACED_FROM_DRAFT", "placed_from_draft"),
                    ("OVERSOLD_ITEMS", "oversold_items"),
                    ("CANCELED", "canceled"),
                    ("ORDER_MARKED_AS_PAID", "order_marked_as_paid"),
                    ("ORDER_FULLY_PAID", "order_fully_paid"),
                    ("UPDATED_ADDRESS", "updated_address"),
                    ("EMAIL_SENT", "email_sent"),
                    ("CONFIRMED", "confirmed"),
                    ("PAYMENT_AUTHORIZED", "payment_authorized"),
                    ("PAYMENT_CAPTURED", "payment_captured"),
                    ("EXTERNAL_SERVICE_NOTIFICATION", "external_service_notification"),
                    ("PAYMENT_REFUNDED", "payment_refunded"),
                    ("PAYMENT_VOIDED", "payment_voided"),
                    ("PAYMENT_FAILED", "payment_failed"),
                    ("INVOICE_REQUESTED", "invoice_requested"),
                    ("INVOICE_GENERATED", "invoice_generated"),
                    ("INVOICE_UPDATED", "invoice_updated"),
                    ("INVOICE_SENT", "invoice_sent"),
                    ("FULFILLMENT_CANCELED", "fulfillment_canceled"),
                    ("FULFILLMENT_RESTOCKED_ITEMS", "fulfillment_restocked_items"),
                    ("FULFILLMENT_FULFILLED_ITEMS", "fulfillment_fulfilled_items"),
                    ("FULFILLMENT_REFUNDED", "fulfillment_refunded"),
                    ("TRACKING_UPDATED", "tracking_updated"),
                    ("NOTE_ADDED", "note_added"),
                    ("OTHER", "other"),
                ],
                max_length=255,
            ),
        ),
        migrations.RunPython(rename_draft_events_type, migrations.RunPython.noop),
    ]
